import Head from 'next/head'
import { useEffect, useState } from 'react'

/** This function hits the endpoint and pulls the api data in the server and passses the data to the component in server(server side rendering) */
// export const getServerSideProps = async () => {
//   const response = await fetch("http://localhost:3000/api/hello");
//   const data = await response.json();
//   return {
//     props: { pokemon: data }
//   }
// }

/** If you want to enable the server side rendering, destructure the pokemon in the Home params */
export default function Home() {
  const [pokemon, setPokemon] = useState(null)

  /** This useEffect will run on the client side not on the server(Client side rendering) */
  useEffect(() => {
    const getApiResponse = async () => {
      const response = (await (await fetch("https://naveenok-organic-memory-5vvj6g6j6jpfwr9-3000.preview.app.github.dev/api/hello")).json());
      setPokemon(response);
    }
    getApiResponse();
  }, []);

  console.log(pokemon)

  console.log("inside the Home component");

  if (!pokemon) return (null)

  return (
    <div >
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {pokemon.map((data, index) => <p key={index}>{data.id}</p>)}
    </div>
  )
}
